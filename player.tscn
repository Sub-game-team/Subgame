[gd_scene load_steps=8 format=3 uid="uid://ch43k4w4dvjsy"]

[ext_resource type="Script" path="res://CharacterBody2DMovement.gd" id="1_pvkax"]
[ext_resource type="Texture2D" uid="uid://e1283ru3wlch" path="res://Art/U-BootV1.png" id="2_id3k4"]
[ext_resource type="Script" path="res://player_camera.gd" id="3_1tnlc"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5meud"]
size = Vector2(62, 60)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kji73"]
size = Vector2(80, 60)

[sub_resource type="PlaceholderTexture2D" id="PlaceholderTexture2D_x6llj"]
size = Vector2(20, 20)

[sub_resource type="LabelSettings" id="LabelSettings_rrj6r"]

[node name="Player" type="CharacterBody2D"]
z_index = 1
collision_mask = 7
motion_mode = 1
script = ExtResource("1_pvkax")
metadata/_edit_group_ = true

[node name="Sprite2D" type="Sprite2D" parent="."]
z_index = 1
position = Vector2(0, -2)
texture = ExtResource("2_id3k4")

[node name="Camera2D" type="Camera2D" parent="."]
limit_smoothed = true
drag_horizontal_enabled = true
drag_vertical_enabled = true
drag_left_margin = 0.3
drag_right_margin = 0.3
script = ExtResource("3_1tnlc")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="."]
position = Vector2(0, 4)
polygon = PackedVector2Array(0, 37, 141, 37, 152, 36, 156, 34, 166, 24, 167, 22, 168, 19, 168, 7, 167, 4, 166, 0, 164, -4, 163, -5, 162, -7, 150, -19, 148, -20, 147, -21, 145, -22, 136, -23, 52, -23, -35, -23, -92, -23, -103, -22, -116, -21, -124, -20, -129, -19, -139, -18, -150, -17, -156, -16, -161, -15, -165, -14, -171, -12, -173, -11, -176, -10, -184, -6, -189, -1, -190, 1, -191, 2, -191, 12, -190, 13, -189, 15, -184, 20, -176, 24, -173, 25, -171, 26, -168, 27, -165, 28, -161, 29, -156, 30, -150, 31, -139, 32, -129, 33, -124, 34, -116, 35, -103, 36, -92, 37)

[node name="Timer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="Area2D_torpedos" type="Area2D" parent="."]
collision_mask = 12

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Area2D_torpedos"]
position = Vector2(140, 0)
polygon = PackedVector2Array(-46, -19, -4, -19, 5, -18, 7, -17, 8, -16, 10, -15, 22, -3, 23, -1, 24, 0, 25, 2, 26, 4, 27, 8, 28, 11, 28, 23, 27, 26, 26, 28, 16, 38, 12, 40, 1, 41, -46, 41)

[node name="Area2D_crew" type="Area2D" parent="."]
collision_mask = 12

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Area2D_crew"]
position = Vector2(63, 11)
shape = SubResource("RectangleShape2D_5meud")

[node name="Area2D" type="Area2D" parent="."]
collision_mask = 12

[node name="CollisionShape2D" type="CollisionShape2D" parent="Area2D"]
position = Vector2(-8, 11)
shape = SubResource("RectangleShape2D_kji73")

[node name="Area2D_reactor" type="Area2D" parent="."]
collision_mask = 12

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Area2D_reactor"]
polygon = PackedVector2Array(-48, -19, -92, -19, -103, -18, -113, -17, -113, 39, -103, 40, -92, 41, -48, 41)

[node name="Area2D_engine" type="Area2D" parent="."]
collision_mask = 12

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Area2D_engine"]
position = Vector2(-119, 30)
polygon = PackedVector2Array(6, 9, 3, 9, -5, 8, -10, 7, -20, 6, -31, 5, -37, 4, -42, 3, -46, 2, -49, 1, -52, 0, -54, -1, -57, -2, -59, -3, -61, -4, -63, -5, -65, -6, -70, -11, -71, -13, -72, -14, -72, -24, -71, -25, -70, -27, -69, -28, -68, -29, -65, -32, -57, -36, -54, -37, -52, -38, -46, -40, -42, -41, -37, -42, -31, -43, -20, -44, -10, -45, -5, -46, 3, -47, 6, -47)

[node name="Timer_damagecalculation" type="Timer" parent="."]
wait_time = 0.25
autostart = true

[node name="Sprite2D2" type="Sprite2D" parent="."]
visible = false
z_index = 2
position = Vector2(131, 11)
texture = SubResource("PlaceholderTexture2D_x6llj")

[node name="Label" type="Label" parent="."]
offset_left = -466.0
offset_top = -122.0
offset_right = -50.0
offset_bottom = -49.0
label_settings = SubResource("LabelSettings_rrj6r")
text_overrun_behavior = 2

[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="area_entered" from="Area2D_torpedos" to="." method="_on_area_2d_torpedos_area_entered"]
[connection signal="input_event" from="Area2D_torpedos" to="." method="_on_area_2d_torpedos_input_event"]
[connection signal="area_entered" from="Area2D_crew" to="." method="_on_area_2d_crew_area_entered"]
[connection signal="input_event" from="Area2D_crew" to="." method="_on_area_2d_crew_input_event"]
[connection signal="area_entered" from="Area2D" to="." method="_on_area_2d_3_area_entered"]
[connection signal="input_event" from="Area2D" to="." method="_on_area_2d_input_event"]
[connection signal="area_entered" from="Area2D_reactor" to="." method="_on_area_2d_reactor_area_entered"]
[connection signal="input_event" from="Area2D_reactor" to="." method="_on_area_2d_reactor_input_event"]
[connection signal="area_entered" from="Area2D_engine" to="." method="_on_area_2d_engine_area_entered"]
[connection signal="input_event" from="Area2D_engine" to="." method="_on_area_2d_engine_input_event"]
[connection signal="timeout" from="Timer_damagecalculation" to="." method="_on_timer_damagecalculation_timeout"]
